FROM node:18

ARG VITE_BACKEND_PORT
ARG VITE_FRONTEND_PORT
ARG VITE_SERVER_HOST

ENV VITE_BACKEND_PORT=${VITE_BACKEND_PORT}
ENV VITE_FRONTEND_PORT=${VITE_FRONTEND_PORT}
ENV VITE_SERVER_HOST=${VITE_SERVER_HOST}

WORKDIR /usr/src/app/client

COPY package.json ./
COPY yarn.lock ./
RUN yarn install

COPY . .

EXPOSE ${VITE_FRONTEND_PORT}
CMD ["yarn", "dev"]