FROM node:18

ARG BACKEND_PORT
ARG FRONTEND_PORT
ARG SERVER_HOST

ENV BACKEND_PORT=${BACKEND_PORT}
ENV FRONTEND_PORT=${FRONTEND_PORT}
ENV SERVER_HOST=${SERVER_HOST}

WORKDIR /usr/src/app/client

COPY package*.json ./
RUN npm install

COPY . .

EXPOSE ${FRONTEND_PORT}
CMD ["npm", "run", "dev"]